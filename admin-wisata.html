<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Wisata - Desa Sukorejo</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
    <div id="loginSection" class="login-container">
        <div class="login-box">
            <h2>üîê Admin Login</h2>
            <p style="text-align: center; margin-bottom: 20px; color: #475569; font-size: 14px; line-height: 1.6;">
            Halaman ini dilindungi dengan passcode. Hanya administrator yang memiliki akses dapat mengelola data wisata.
        </p>
            <div class="form-group">
                <label>Passcode</label>
                <input type="password" id="loginPassword" placeholder="Masukkan passcode">
            </div>
            <button onclick="window.loginWisata()" class="btn-submit" style="width: 100%;">üîì Login</button>
            <!-- <p style="text-align: center; margin-top: 16px; color: #64748b; font-size: 0.875rem;">
                Password default: <strong>WISATA2024</strong>
            </p> -->
            <div style="background: #fef3c7; padding: 12px; border-radius: 8px; margin-top: 20px; border-left: 4px solid #f59e0b;">
            <p style="margin: 0; font-size: 13px; color: #92400e; line-height: 1.5;">
                <strong>‚ö†Ô∏è Peringatan Keamanan:</strong><br>
                Jangan bagikan passcode kepada orang yang tidak berwenang. Sesi login akan otomatis berakhir setelah 1 jam.
            </p>
        </div>
            <div style="text-align: center; margin-top: 16px;">
                <a href="wisata.html" class="btn-back">‚Üê Kembali</a>
            </div>
        </div>
    </div>

    <div id="adminSection" class="admin-container" style="display: none;">
        <div class="admin-header">
            <h1>Admin Wisata Desa Sukorejo</h1>
            <div style="display: flex; gap: 10px; align-items: center;">
                <button onclick="window.openChangePasswordModalWisata()" class="btn-secondary" style="background: #7c3aed;">üîê Ganti Password</button>
                <button onclick="window.logoutWisata()" class="btn-secondary logout-btn">Logout</button>
            </div>
        </div>

        <div class="admin-content">
            <!-- Form Tambah Wisata -->
            <div class="admin-section">
                <h2>Tambah Destinasi Wisata Baru</h2>
                
                <div class="form-group">
                    <label>Nama Destinasi *</label>
                    <input type="text" id="namaWisata" placeholder="Contoh: Air Terjun Grojogan">
                </div>

                <div class="form-group">
                    <label>Kategori *</label>
                    <select id="kategoriWisata">
                        <option value="">Pilih Kategori</option>
                        <option value="Alam">Wisata Alam</option>
                        <option value="Budaya">Wisata Budaya</option>
                        <option value="Kuliner">Wisata Kuliner</option>
                        <option value="Edukasi">Wisata Edukasi</option>
                        <option value="Religi">Wisata Religi</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Deskripsi Lengkap *</label>
                    <textarea id="deskripsiWisata" rows="5" placeholder="Ceritakan tentang destinasi wisata ini secara detail..."></textarea>
                </div>

                <div class="form-group">
                    <label>Foto Utama (Max 2MB)</label>
                    <input type="file" id="fotoWisata" accept="image/*" multiple onchange="window.previewAddWisataImages(event)">
                    <div id="previewContainer" style="margin-top: 12px; display: flex; gap: 8px; flex-wrap: wrap;"></div>
                </div>

                <div class="form-group">
                    <label>Video Destinasi Wisata (opsional, bisa pilih beberapa)</label>
                    <input type="file" id="videoWisata" accept="video/*" multiple onchange="window.previewAddWisataVideos(event)">
                    <div id="videoPreviewContainer" style="margin-top: 10px; display: flex; gap: 8px; flex-wrap: wrap;"></div>
                    <p style="font-size: 12px; color: #64748b; margin-top: 4px;">Format: MP4, WebM, atau OGG. Maksimal 50MB per video</p>
                </div>

                <div class="form-group">
                    <label>Lokasi (Klik pada peta untuk menandai lokasi) *</label>
                    <button onclick="window.getUserLocationWisata()" class="btn-secondary" style="margin-bottom: 12px;">üìç Lihat Lokasi Saya</button>
                    <div class="map-picker-container">
                        <div id="mapPickerWisata"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Latitude *</label>
                    <input type="text" id="latWisata" placeholder="-7.5626" readonly>
                </div>

                <div class="form-group">
                    <label>Longitude *</label>
                    <input type="text" id="lngWisata" placeholder="110.8282" readonly>
                </div>

                <div class="form-group">
                    <label>Jam Operasional</label>
                    <input type="text" id="jamOperasional" placeholder="Contoh: 08:00 - 17:00">
                </div>

                <div class="form-group">
                    <label>Harga Tiket</label>
                    <input type="text" id="hargaTiket" placeholder="Contoh: Rp 5.000 / Gratis">
                </div>

                <div class="form-group">
                    <label>Kontak (No. HP/WhatsApp)</label>
                    <input type="text" id="kontakWisata" placeholder="Contoh: 081234567890">
                </div>

                <div class="form-actions">
                    <button onclick="window.addWisata()" class="btn-submit">Tambah Wisata</button>
                </div>
            </div>

            <!-- Daftar Wisata -->
            <div class="admin-section">
                <h2>Daftar Destinasi Wisata</h2>
                <div style="overflow-x: auto;">
                    <table class="umkm-table">
                        <thead>
                            <tr>
                                <th>Nama</th>
                                <th>Kategori</th>
                                <th>Deskripsi</th>
                                <th>Lokasi</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="wisataTableBody">
                            <!-- Data akan dimuat di sini -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Form Edit (Hidden by default) -->
            <div id="editSection" class="admin-section" style="display: none;">
                <h2>Edit Destinasi Wisata</h2>
                <input type="hidden" id="editWisataId">
                
                <div class="form-group">
                    <label>Nama Destinasi *</label>
                    <input type="text" id="editNamaWisata">
                </div>

                <div class="form-group">
                    <label>Kategori *</label>
                    <select id="editKategoriWisata">
                        <option value="Alam">Wisata Alam</option>
                        <option value="Budaya">Wisata Budaya</option>
                        <option value="Kuliner">Wisata Kuliner</option>
                        <option value="Edukasi">Wisata Edukasi</option>
                        <option value="Religi">Wisata Religi</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Deskripsi Lengkap *</label>
                    <textarea id="editDeskripsiWisata" rows="5"></textarea>
                </div>

                <div class="form-group">
                    <label>Foto Utama (Max 2MB)</label>
                    <input type="file" id="editFotoWisata" accept="image/*" multiple onchange="window.previewEditWisataImages(event)">
                    <div id="editPreviewContainer" style="margin-top: 12px; display: flex; gap: 8px; flex-wrap: wrap;"></div>
                </div>

                <div class="form-group">
                    <label>Video Destinasi Wisata (opsional, bisa pilih beberapa)</label>
                    <input type="file" id="editVideoWisata" accept="video/*" multiple onchange="window.previewEditWisataVideos(event)">
                    <div id="editVideoPreviewContainer" style="margin-top: 10px; display: flex; gap: 8px; flex-wrap: wrap;"></div>
                    <p style="font-size: 12px; color: #64748b; margin-top: 4px;">Format: MP4, WebM, atau OGG. Maksimal 50MB per video</p>
                </div>

                <div class="form-group">
                    <label>Lokasi (Klik pada peta untuk menandai lokasi) *</label>
                    <button onclick="window.getUserLocationWisataEdit()" class="btn-secondary" style="margin-bottom: 12px;">üìç Lihat Lokasi Saya</button>
                    <div class="map-picker-container">
                        <div id="mapPickerWisataEdit"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Latitude *</label>
                    <input type="text" id="editLatWisata" readonly>
                </div>

                <div class="form-group">
                    <label>Longitude *</label>
                    <input type="text" id="editLngWisata" readonly>
                </div>

                <div class="form-group">
                    <label>Jam Operasional</label>
                    <input type="text" id="editJamOperasional">
                </div>

                <div class="form-group">
                    <label>Harga Tiket</label>
                    <input type="text" id="editHargaTiket">
                </div>

                <div class="form-group">
                    <label>Kontak (No. HP/WhatsApp)</label>
                    <input type="text" id="editKontakWisata" placeholder="Contoh: 081234567890">
                </div>

                <div class="form-actions">
                    <button onclick="window.updateWisata()" class="btn-submit">Simpan Perubahan</button>
                    <button onclick="window.cancelEdit()" class="btn-cancel">Batal</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Change Password Modal Wisata -->
    <div id="changePasswordModalWisata" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üîê Ganti Password Admin Wisata</h2>
                <button class="modal-close" onclick="window.closeChangePasswordModalWisata()">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Password Lama</label>
                    <input type="password" id="oldPasswordWisata" placeholder="Masukkan password lama">
                </div>
                <div class="form-group">
                    <label>Password Baru</label>
                    <input type="password" id="newPasswordWisata" placeholder="Masukkan password baru">
                </div>
                <div class="form-group">
                    <label>Konfirmasi Password Baru</label>
                    <input type="password" id="confirmPasswordWisata" placeholder="Konfirmasi password baru">
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="window.closeChangePasswordModalWisata()" class="btn-secondary">Batal</button>
                <button onclick="window.changePasswordWisata()" class="btn-submit">Ubah Password</button>
            </div>
        </div>
    </div>

    <script src="js/data-wisata.js"></script>
    <script src="js/admin-wisata.js"></script>
</body>
</html>
